{
  "address": "0x202aA761C9988A511746bE468DFAA950C122390e",
  "abi": [
    {
      "inputs": [],
      "name": "AlreadyRanked",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint8",
          "name": "index",
          "type": "uint8"
        }
      ],
      "name": "DuplicateIndex",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint8",
          "name": "index",
          "type": "uint8"
        }
      ],
      "name": "IndexOutOfRange",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidItem",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ItemsFull",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NoDirectETH",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "PayoutFailed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Reentrancy",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "provided",
          "type": "uint256"
        }
      ],
      "name": "WrongEntryFee",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "enum Rankr.Phase",
          "name": "expected",
          "type": "uint8"
        },
        {
          "internalType": "enum Rankr.Phase",
          "name": "current",
          "type": "uint8"
        }
      ],
      "name": "WrongPhase",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint8",
          "name": "index",
          "type": "uint8"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "adder",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "addedAt",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "author",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "title",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "url",
          "type": "string"
        }
      ],
      "name": "ItemAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "player",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint8[3]",
          "name": "order",
          "type": "uint8[3]"
        }
      ],
      "name": "RankingSubmitted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address[]",
          "name": "winners",
          "type": "address[]"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "rewardPerWinner",
          "type": "uint256"
        }
      ],
      "name": "RoundCompleted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [],
      "name": "RoundReset",
      "type": "event"
    },
    {
      "stateMutability": "payable",
      "type": "fallback"
    },
    {
      "inputs": [],
      "name": "ENTRY_FEE",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MAX_PLAYERS",
      "outputs": [
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "NUM_ITEMS",
      "outputs": [
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "string",
              "name": "author",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "title",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "url",
              "type": "string"
            }
          ],
          "internalType": "struct Rankr.ItemInput",
          "name": "item",
          "type": "tuple"
        }
      ],
      "name": "addItem",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getCurrentItems",
      "outputs": [
        {
          "components": [
            {
              "internalType": "string",
              "name": "author",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "title",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "url",
              "type": "string"
            },
            {
              "internalType": "address",
              "name": "adder",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "addedAt",
              "type": "uint256"
            }
          ],
          "internalType": "struct Rankr.Item[3]",
          "name": "",
          "type": "tuple[3]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getPlayers",
      "outputs": [
        {
          "internalType": "address[]",
          "name": "",
          "type": "address[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getPrizePool",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "items",
      "outputs": [
        {
          "internalType": "string",
          "name": "author",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "title",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "url",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "adder",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "addedAt",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "itemsCount",
      "outputs": [
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "phase",
      "outputs": [
        {
          "internalType": "enum Rankr.Phase",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "players",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "prizePool",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint8[3]",
          "name": "order",
          "type": "uint8[3]"
        }
      ],
      "name": "rankItems",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "transactionHash": "0x0d56e1286f0fcd077d06ab28b656838bec382693ce3071439a58842c4bd8fdb1",
  "receipt": {
    "to": null,
    "from": "0x005B6bE90759B9Ac673cA2a03dC7Fc69A0959d28",
    "contractAddress": "0x202aA761C9988A511746bE468DFAA950C122390e",
    "transactionIndex": 252,
    "gasUsed": "1654956",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x0eeb79b5a8b7e4fcfa3b604079fedf379323bb0295f20819d0ac1905425bf708",
    "transactionHash": "0x0d56e1286f0fcd077d06ab28b656838bec382693ce3071439a58842c4bd8fdb1",
    "logs": [],
    "blockNumber": 37015705,
    "cumulativeGasUsed": "50868811",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "5e22eab1fd46de5d6d0e7c8475836921",
  "metadata": "{\"compiler\":{\"version\":\"0.8.25+commit.b61c2a91\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"AlreadyRanked\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"index\",\"type\":\"uint8\"}],\"name\":\"DuplicateIndex\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"index\",\"type\":\"uint8\"}],\"name\":\"IndexOutOfRange\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidItem\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ItemsFull\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NoDirectETH\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PayoutFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Reentrancy\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"provided\",\"type\":\"uint256\"}],\"name\":\"WrongEntryFee\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"enum Rankr.Phase\",\"name\":\"expected\",\"type\":\"uint8\"},{\"internalType\":\"enum Rankr.Phase\",\"name\":\"current\",\"type\":\"uint8\"}],\"name\":\"WrongPhase\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint8\",\"name\":\"index\",\"type\":\"uint8\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"adder\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"addedAt\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"title\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"url\",\"type\":\"string\"}],\"name\":\"ItemAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint8[3]\",\"name\":\"order\",\"type\":\"uint8[3]\"}],\"name\":\"RankingSubmitted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address[]\",\"name\":\"winners\",\"type\":\"address[]\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rewardPerWinner\",\"type\":\"uint256\"}],\"name\":\"RoundCompleted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"RoundReset\",\"type\":\"event\"},{\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"inputs\":[],\"name\":\"ENTRY_FEE\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MAX_PLAYERS\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"NUM_ITEMS\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"title\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"url\",\"type\":\"string\"}],\"internalType\":\"struct Rankr.ItemInput\",\"name\":\"item\",\"type\":\"tuple\"}],\"name\":\"addItem\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getCurrentItems\",\"outputs\":[{\"components\":[{\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"title\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"url\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"adder\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"addedAt\",\"type\":\"uint256\"}],\"internalType\":\"struct Rankr.Item[3]\",\"name\":\"\",\"type\":\"tuple[3]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getPlayers\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getPrizePool\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"items\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"title\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"url\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"adder\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"addedAt\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"itemsCount\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"phase\",\"outputs\":[{\"internalType\":\"enum Rankr.Phase\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"players\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"prizePool\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8[3]\",\"name\":\"order\",\"type\":\"uint8[3]\"}],\"name\":\"rankItems\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"details\":\"Functionality preserved; refactored with custom errors, modifiers, NatSpec and reentrancy guard.\",\"kind\":\"dev\",\"methods\":{\"addItem((string,string,string))\":{\"details\":\"Reverts when not in CollectingItems phase, when items are full, or input is invalid.\",\"params\":{\"item\":\"Author, title and url of the item to add.\"}},\"getCurrentItems()\":{\"returns\":{\"_0\":\"The fixed-size array of items of length NUM_ITEMS.\"}},\"getPlayers()\":{\"returns\":{\"_0\":\"The dynamic list of player addresses.\"}},\"getPrizePool()\":{\"returns\":{\"_0\":\"The prize pool balance.\"}},\"rankItems(uint8[3])\":{\"details\":\"Reverts when not in CollectingRanks phase, wrong ETH value, or sender already ranked.\",\"params\":{\"order\":\"A permutation of [0..NUM_ITEMS-1] from best to worst.\"}}},\"title\":\"Rank5 Autonomous Game\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"addItem((string,string,string))\":{\"notice\":\"Add an item with author, title and url until NUM_ITEMS exist, then switch to ranking phase.\"},\"getCurrentItems()\":{\"notice\":\"Returns the items proposed for the current round.\"},\"getPlayers()\":{\"notice\":\"Returns the addresses of players who have ranked in the current round so far.\"},\"getPrizePool()\":{\"notice\":\"Returns the current prize pool (in wei) accumulated for the round.\"},\"rankItems(uint8[3])\":{\"notice\":\"Submit ranking (best\\u2192worst) for the current round by paying exactly ENTRY_FEE wei.\"}},\"notice\":\"Repeated rounds game with {NUM_ITEMS} items and up to {MAX_PLAYERS} players per round.         Each ranking submission requires exactly {ENTRY_FEE} wei. On reaching {MAX_PLAYERS} players:           1) Compute cumulative ranking via Borda count           2) Identify player(s) whose order matches the final order most closely           3) Split and pay the prize pool among winners (first gets remainder)           4) Reset state for the next round\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Rankr.sol\":\"Rankr\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/Rankr.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.25;\\n\\n/**\\n * @title Rank5 Autonomous Game\\n * @notice Repeated rounds game with {NUM_ITEMS} items and up to {MAX_PLAYERS} players per round.\\n *         Each ranking submission requires exactly {ENTRY_FEE} wei. On reaching {MAX_PLAYERS} players:\\n *           1) Compute cumulative ranking via Borda count\\n *           2) Identify player(s) whose order matches the final order most closely\\n *           3) Split and pay the prize pool among winners (first gets remainder)\\n *           4) Reset state for the next round\\n * @dev Functionality preserved; refactored with custom errors, modifiers, NatSpec and reentrancy guard.\\n */\\ncontract Rankr {\\n    uint256 public constant ENTRY_FEE = 1e13; // 0.0001 ETH\\n    uint8   public constant NUM_ITEMS = 3;\\n    uint8   public constant MAX_PLAYERS = 8;\\n\\n    enum Phase { CollectingItems, CollectingRanks }\\n    Phase public phase = Phase.CollectingItems;\\n\\n    // --------- Errors ---------\\n    error WrongPhase(Phase expected, Phase current);\\n    error ItemsFull();\\n    error InvalidItem();\\n    error WrongEntryFee(uint256 provided);\\n    error AlreadyRanked();\\n    error IndexOutOfRange(uint8 index);\\n    error DuplicateIndex(uint8 index);\\n    error PayoutFailed(address to, uint256 amount);\\n    error NoDirectETH();\\n    error Reentrancy();\\n\\n    struct Item {\\n        string author;\\n        string title;\\n        string url;\\n        address adder;\\n        uint256 addedAt;\\n    }\\n\\n    struct ItemInput {\\n        string author;\\n        string title;\\n        string url;\\n    }\\n\\n    Item[NUM_ITEMS] public items;\\n    uint8 public itemsCount;\\n\\n    address[] public players;\\n    mapping(address => uint8[NUM_ITEMS]) private rankings;\\n\\n    uint256 public prizePool;\\n\\n    // Reentrancy guard (lightweight)\\n    bool private _entered;\\n\\n    event ItemAdded(uint8 indexed index, address indexed adder, uint256 addedAt, string author, string title, string url);\\n    event RankingSubmitted(address indexed player, uint8[NUM_ITEMS] order);\\n    event RoundCompleted(address[] winners, uint256 rewardPerWinner);\\n    event RoundReset();\\n\\n    // --------- Modifiers ---------\\n    modifier inPhase(Phase expected) {\\n        if (phase != expected) revert WrongPhase(expected, phase);\\n        _;\\n    }\\n\\n    modifier nonReentrant() {\\n        if (_entered) revert Reentrancy();\\n        _entered = true;\\n        _;\\n        _entered = false;\\n    }\\n\\n    // --------- External ---------\\n\\n    /// @notice Add an item with author, title and url until NUM_ITEMS exist, then switch to ranking phase.\\n    /// @dev Reverts when not in CollectingItems phase, when items are full, or input is invalid.\\n    /// @param item Author, title and url of the item to add.\\n    function addItem(ItemInput calldata item) external inPhase(Phase.CollectingItems) {\\n        if (itemsCount >= NUM_ITEMS) revert ItemsFull();\\n        if (!_isValidItemInput(item)) revert InvalidItem();\\n\\n        items[itemsCount] = Item({ author: item.author, title: item.title, url: item.url, adder: msg.sender, addedAt: block.timestamp });\\n        emit ItemAdded(itemsCount, msg.sender, block.timestamp, item.author, item.title, item.url);\\n        itemsCount++;\\n\\n        if (itemsCount == NUM_ITEMS) phase = Phase.CollectingRanks;\\n    }\\n\\n    /// @notice Submit ranking (best\\u2192worst) for the current round by paying exactly ENTRY_FEE wei.\\n    /// @dev Reverts when not in CollectingRanks phase, wrong ETH value, or sender already ranked.\\n    /// @param order A permutation of [0..NUM_ITEMS-1] from best to worst.\\n    function rankItems(uint8[NUM_ITEMS] calldata order) external payable inPhase(Phase.CollectingRanks) nonReentrant {\\n        if (msg.value != ENTRY_FEE) revert WrongEntryFee(msg.value);\\n        _validatePermutation(order);\\n\\n        players.push(msg.sender);\\n        rankings[msg.sender] = order;\\n        prizePool += msg.value;\\n\\n        emit RankingSubmitted(msg.sender, order);\\n\\n        if (players.length == MAX_PLAYERS) {\\n            _finalizeRound();\\n        }\\n    }\\n\\n    // --------- View helpers ---------\\n\\n    /// @notice Returns the items proposed for the current round.\\n    /// @return The fixed-size array of items of length NUM_ITEMS.\\n    function getCurrentItems() external view returns (Item[NUM_ITEMS] memory) {\\n        return items;\\n    }\\n\\n    /// @notice Returns the addresses of players who have ranked in the current round so far.\\n    /// @return The dynamic list of player addresses.\\n    function getPlayers() external view returns (address[] memory) {\\n        return players;\\n    }\\n\\n    /// @notice Returns the current prize pool (in wei) accumulated for the round.\\n    /// @return The prize pool balance.\\n    function getPrizePool() external view returns (uint256) {\\n        return prizePool;\\n    }\\n\\n    // --------- Internal logic ---------\\n\\n    function _finalizeRound() internal {\\n        // --- 1. Compute cumulative item scores (Borda count) ---\\n        uint16[NUM_ITEMS] memory scores;\\n        for (uint8 p = 0; p < MAX_PLAYERS; p++) {\\n            uint8[NUM_ITEMS] memory order = rankings[players[p]];\\n            for (uint8 pos = 0; pos < NUM_ITEMS; pos++) {\\n                scores[order[pos]] += uint16(NUM_ITEMS - pos); // NUM_ITEMS..1 pts\\n            }\\n        }\\n\\n        // --- 2. Sort items by total score to get final order ---\\n        uint8[NUM_ITEMS] memory finalOrder;\\n        for (uint8 i = 0; i < NUM_ITEMS; i++) {\\n            finalOrder[i] = i;\\n        }\\n        for (uint8 i = 0; i < NUM_ITEMS; i++) {\\n            uint8 best = i;\\n            for (uint8 j = i + 1; j < NUM_ITEMS; j++) {\\n                if (scores[finalOrder[j]] > scores[finalOrder[best]]) best = j;\\n            }\\n            (finalOrder[i], finalOrder[best]) = (finalOrder[best], finalOrder[i]);\\n        }\\n\\n        // --- 3. Score each player by how many positions match ---\\n        uint8 maxMatch = 0;\\n        address[] memory tmp = new address[](MAX_PLAYERS);\\n        uint8 winCount = 0;\\n\\n        for (uint8 p = 0; p < MAX_PLAYERS; p++) {\\n            uint8[NUM_ITEMS] memory ord = rankings[players[p]];\\n            uint8 matches = 0;\\n            for (uint8 k = 0; k < NUM_ITEMS; k++)\\n                if (ord[k] == finalOrder[k]) matches++;\\n\\n            if (matches > maxMatch) {\\n                maxMatch = matches;\\n                winCount = 1;\\n                tmp[0] = players[p];\\n            } else if (matches == maxMatch) {\\n                tmp[winCount++] = players[p];\\n            }\\n        }\\n\\n        // --- 4. Pay winners equally ---\\n        address[] memory winners = new address[](winCount);\\n        for (uint8 i = 0; i < winCount; i++) winners[i] = tmp[i];\\n        uint256 poolBeforePayout = prizePool;\\n        uint256 reward = poolBeforePayout / winCount;\\n        uint256 totalBase = reward * winCount;\\n        uint256 remainder = poolBeforePayout - totalBase;\\n        prizePool = 0; // CEI: zero before external calls\\n\\n        for (uint8 i = 0; i < winCount; i++) {\\n            uint256 amount = reward + (i == 0 ? remainder : 0);\\n            (bool ok, ) = winners[i].call{value: amount}(\\\"\\\");\\n            if (!ok) revert PayoutFailed(winners[i], amount);\\n        }\\n\\n        emit RoundCompleted(winners, reward);\\n\\n        // --- 5. Reset state for next round ---\\n        _resetState();\\n    }\\n\\n    function _resetState() internal {\\n        for (uint8 i = 0; i < NUM_ITEMS; i++) {\\n            items[i] = Item({ author: \\\"\\\", title: \\\"\\\", url: \\\"\\\", adder: address(0), addedAt: 0 });\\n        }\\n        itemsCount = 0;\\n\\n        for (uint8 i = 0; i < players.length; i++) {\\n            delete rankings[players[i]];\\n        }\\n        delete players;\\n        prizePool = 0;\\n        phase = Phase.CollectingItems;\\n\\n        emit RoundReset();\\n    }\\n\\n    // --------- Utils ---------\\n\\n    function _isValidItemInput(ItemInput calldata item) internal pure returns (bool) {\\n        if (bytes(item.author).length == 0) return false;\\n        if (bytes(item.title).length == 0) return false;\\n        if (bytes(item.url).length == 0) return false;\\n        return true;\\n    }\\n\\n    function _validatePermutation(uint8[NUM_ITEMS] calldata order) internal pure {\\n        bool[NUM_ITEMS] memory seen;\\n        for (uint8 i = 0; i < NUM_ITEMS; i++) {\\n            uint8 v = order[i];\\n            if (v >= NUM_ITEMS) revert IndexOutOfRange(v);\\n            if (seen[v]) revert DuplicateIndex(v);\\n            seen[v] = true;\\n        }\\n    }\\n\\n    /// @dev No direct ETH transfers accepted.\\n    receive() external payable { revert NoDirectETH(); }\\n\\n    /// @dev No function selectors supported; reject unknown calls and ETH via fallback path.\\n    fallback() external payable { revert NoDirectETH(); }\\n}\",\"keccak256\":\"0x921675f7eefe3a5e79c8c2a6b2eccddc6750aaf60a950f60b549ca2cb4368178\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60806040526000805460ff19169055348015601957600080fd5b50611cec806100296000396000f3fe6080604052600436106100c65760003560e01c80638b5b9ccc1161007f578063e2c03ace11610059578063e2c03ace14610237578063f5e9601114610251578063f6d361cc14610266578063f71d96cb14610280576100e4565b80638b5b9ccc146101bd578063b1c9fe6e146101df578063bfb231d214610206576100e4565b80633bc330d2146100fd578063428cebe2146101285780634411b3eb1461014a578063719ce73e14610171578063839e48de14610195578063884bf67c146101a8576100e4565b366100e457604051631021348160e01b815260040160405180910390fd5b604051631021348160e01b815260040160405180910390fd5b34801561010957600080fd5b506101126102b8565b60405161011f91906116c4565b60405180910390f35b34801561013457600080fd5b5061014861014336600461176f565b6104dd565b005b34801561015657600080fd5b5061015f600881565b60405160ff909116815260200161011f565b34801561017d57600080fd5b5061018760135481565b60405190815260200161011f565b6101486101a33660046117b1565b6107a6565b3480156101b457600080fd5b50601354610187565b3480156101c957600080fd5b506101d2610918565b60405161011f919061181e565b3480156101eb57600080fd5b506000546101f99060ff1681565b60405161011f9190611869565b34801561021257600080fd5b5061022661022136600461187d565b61097a565b60405161011f959493929190611896565b34801561024357600080fd5b5060105461015f9060ff1681565b34801561025d57600080fd5b5061015f600381565b34801561027257600080fd5b506101876509184e72a00081565b34801561028c57600080fd5b506102a061029b36600461187d565b610b53565b6040516001600160a01b03909116815260200161011f565b6102c0611534565b6040805160608101909152600160036000835b828210156104d4578382600502016040518060a00160405290816000820180546102fc906118ed565b80601f0160208091040260200160405190810160405280929190818152602001828054610328906118ed565b80156103755780601f1061034a57610100808354040283529160200191610375565b820191906000526020600020905b81548152906001019060200180831161035857829003601f168201915b5050505050815260200160018201805461038e906118ed565b80601f01602080910402602001604051908101604052809291908181526020018280546103ba906118ed565b80156104075780601f106103dc57610100808354040283529160200191610407565b820191906000526020600020905b8154815290600101906020018083116103ea57829003601f168201915b50505050508152602001600282018054610420906118ed565b80601f016020809104026020016040519081016040528092919081815260200182805461044c906118ed565b80156104995780601f1061046e57610100808354040283529160200191610499565b820191906000526020600020905b81548152906001019060200180831161047c57829003601f168201915b505050918352505060038201546001600160a01b031660208083019190915260049092015460409091015290825260019290920191016102d3565b50505050905090565b60008060005460ff1660018111156104f7576104f7611831565b14610529576000546040516305fb5e1b60e01b815261052091839160ff90911690600401611921565b60405180910390fd5b601054600360ff90911610610551576040516358fbefcb60e11b815260040160405180910390fd5b61055a82610b7d565b610577576040516327b3518960e11b815260040160405180910390fd5b6040805160a081019091528061058d848061193c565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050908252506020908101906105d69085018561193c565b8080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525050509082525060200161061d604085018561193c565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050908252503360208201524260409091015260105460019060ff166003811061067a5761067a61198a565b6005020160008201518160000190816106939190611a06565b50602082015160018201906106a89082611a06565b50604082015160028201906106bd9082611a06565b5060608201516003820180546001600160a01b0319166001600160a01b03909216919091179055608090910151600490910155601054339060ff167ff3e72e6ae6e80c6ba9ec05a6258f20828c52f8122333e93bf8ba4cc1a55da61e42610724868061193c565b610731602089018961193c565b61073e60408b018b61193c565b6040516107519796959493929190611aef565b60405180910390a36010805460ff1690600061076c83611b55565b82546101009290920a60ff818102199093169183160217909155601054166002190190506107a2576000805460ff191660011790555b5050565b60018060005460ff1660018111156107c0576107c0611831565b146107e9576000546040516305fb5e1b60e01b815261052091839160ff90911690600401611921565b60145460ff161561080d5760405163558a1e0360e11b815260040160405180910390fd5b6014805460ff19166001179055346509184e72a0001461084257604051630517287f60e41b8152346004820152602401610520565b61084b82610bde565b60118054600181019091557f31ecc21a745e3968a04e9570e4425bc18fa8019c68028196b546d1669c200c680180546001600160a01b0319163390811790915560009081526012602052604090206108a590836003611594565b5034601360008282546108b89190611b74565b909155505060405133907ff2af8c8b3986f97978f8f6dc47b3290511328d1293569de75e6e3f88702d0ad9906108ef908590611b9d565b60405180910390a26011546007190161090a5761090a610cb6565b50506014805460ff19169055565b6060601180548060200260200160405190810160405280929190818152602001828054801561097057602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610952575b5050505050905090565b6001816003811061098a57600080fd5b600502018054909150819061099e906118ed565b80601f01602080910402602001604051908101604052809291908181526020018280546109ca906118ed565b8015610a175780601f106109ec57610100808354040283529160200191610a17565b820191906000526020600020905b8154815290600101906020018083116109fa57829003601f168201915b505050505090806001018054610a2c906118ed565b80601f0160208091040260200160405190810160405280929190818152602001828054610a58906118ed565b8015610aa55780601f10610a7a57610100808354040283529160200191610aa5565b820191906000526020600020905b815481529060010190602001808311610a8857829003601f168201915b505050505090806002018054610aba906118ed565b80601f0160208091040260200160405190810160405280929190818152602001828054610ae6906118ed565b8015610b335780601f10610b0857610100808354040283529160200191610b33565b820191906000526020600020905b815481529060010190602001808311610b1657829003601f168201915b50505050600383015460049093015491926001600160a01b031691905085565b60118181548110610b6357600080fd5b6000918252602090912001546001600160a01b0316905081565b6000610b89828061193c565b9050600003610b9a57506000919050565b610ba7602083018361193c565b9050600003610bb857506000919050565b610bc5604083018361193c565b9050600003610bd657506000919050565b506001919050565b610be661162a565b60005b600360ff82161015610cb1576000838260ff1660038110610c0c57610c0c61198a565b602002016020810190610c1f9190611bd9565b9050600360ff821610610c4a5760405163515a45e760e11b815260ff82166004820152602401610520565b828160ff1660038110610c5f57610c5f61198a565b602002015115610c8757604051631fd2e8a560e31b815260ff82166004820152602401610520565b6001838260ff1660038110610c9e57610c9e61198a565b9115156020909202015250600101610be9565b505050565b610cbe61162a565b60005b600860ff82161015610dce5760006012600060118460ff1681548110610ce957610ce961198a565b6000918252602080832091909101546001600160a01b0316835282019290925260409081018220815160608101928390529290916003918390855b825461010083900a900460ff16815260206001928301818104948501949093039092029101808411610d245790505050505050905060005b600360ff82161015610dc457610d73816003611bf4565b60ff1684838360ff1660038110610d8c57610d8c61198a565b602002015160ff1660038110610da457610da461198a565b60200201818151610db59190611c0d565b61ffff16905250600101610d5c565b5050600101610cc1565b50610dd761162a565b60005b600360ff82161015610e115780828260ff1660038110610dfc57610dfc61198a565b60ff9092166020929092020152600101610dda565b5060005b600360ff82161015610f3e57806000610e2f826001611c2f565b90505b600360ff82161015610ebe5784848360ff1660038110610e5457610e5461198a565b602002015160ff1660038110610e6c57610e6c61198a565b602002015161ffff1685858360ff1660038110610e8b57610e8b61198a565b602002015160ff1660038110610ea357610ea361198a565b602002015161ffff161115610eb6578091505b600101610e32565b50828160ff1660038110610ed457610ed461198a565b6020020151838360ff1660038110610eee57610eee61198a565b6020020151848460ff1660038110610f0857610f0861198a565b60200201858460ff1660038110610f2157610f2161198a565b60ff93841660209190910291909101529116905250600101610e15565b50604080516008808252610120820190925260009182919060208201610100803683370190505090506000805b600860ff821610156111635760006012600060118460ff1681548110610f9357610f9361198a565b6000918252602080832091909101546001600160a01b0316835282019290925260409081018220815160608101928390529290916003918390855b825461010083900a900460ff16815260206001928301818104948501949093039092029101808411610fce579050505050505090506000805b600360ff8216101561106857878160ff16600381106110285761102861198a565b602002015160ff16838260ff16600381106110455761104561198a565b602002015160ff1603611060578161105c81611b55565b9250505b600101611007565b508560ff168160ff1611156110e0578095506001935060118360ff16815481106110945761109461198a565b600091825260208220015486516001600160a01b039091169187916110bb576110bb61198a565b60200260200101906001600160a01b031690816001600160a01b031681525050611159565b8560ff168160ff16036111595760118360ff16815481106111035761110361198a565b6000918252602090912001546001600160a01b0316858561112381611b55565b965060ff16815181106111385761113861198a565b60200260200101906001600160a01b031690816001600160a01b0316815250505b5050600101610f6b565b5060008160ff1667ffffffffffffffff811115611182576111826119a0565b6040519080825280602002602001820160405280156111ab578160200160208202803683370190505b50905060005b8260ff168160ff16101561121157838160ff16815181106111d4576111d461198a565b6020026020010151828260ff16815181106111f1576111f161198a565b6001600160a01b03909216602092830291909101909101526001016111b1565b50601354600061122460ff851683611c48565b9050600061123560ff861683611c6a565b905060006112438285611c81565b600060138190559091505b8660ff168160ff16101561134a57600060ff82161561126e576000611270565b825b61127a9086611b74565b90506000878360ff16815181106112935761129361198a565b60200260200101516001600160a01b03168260405160006040518083038185875af1925050503d80600081146112e5576040519150601f19603f3d011682016040523d82523d6000602084013e6112ea565b606091505b505090508061134057878360ff16815181106113085761130861198a565b60200260200101518260405163e3e9273560e01b81526004016105209291906001600160a01b03929092168252602082015260400190565b505060010161124e565b507fc4529ca7a8ea53caec7963aa9e414cc63526c15c578b114b9315e80fd7eec666858460405161137c929190611c94565b60405180910390a161138c611398565b50505050505050505050565b60005b600360ff82161015611483576040805160c081018252600060a082018181528252825160208181018552828252808401919091528351908101845281815292820192909252606081018290526080810191909152600160ff8316600381106114055761140561198a565b60050201600082015181600001908161141e9190611a06565b50602082015160018201906114339082611a06565b50604082015160028201906114489082611a06565b5060608201516003820180546001600160a01b0319166001600160a01b0390921691909117905560809091015160049091015560010161139b565b506010805460ff1916905560005b60115460ff821610156114ef576012600060118360ff16815481106114b8576114b861198a565b60009182526020808320909101546001600160a01b03168352820192909252604001812055806114e781611b55565b915050611491565b506114fc60116000611648565b60006013819055805460ff191681556040517f03d7415a8b5c901ab0451507bd934f2971b04632563374d49a1cfef4c8666e5a9190a1565b60405180606001604052806003905b61157e6040518060a0016040528060608152602001606081526020016060815260200160006001600160a01b03168152602001600081525090565b8152602001906001900390816115435790505090565b60018301918390821561161a5791602002820160005b838211156115eb57833560ff1683826101000a81548160ff021916908360ff16021790555092602001926001016020816000010492830192600103026115aa565b80156116185782816101000a81549060ff02191690556001016020816000010492830192600103026115eb565b505b50611626929150611669565b5090565b60405180606001604052806003906020820280368337509192915050565b50805460008255906000526020600020908101906116669190611669565b50565b5b80821115611626576000815560010161166a565b6000815180845260005b818110156116a457602081850181015186830182015201611688565b506000602082860101526020601f19601f83011685010191505092915050565b6020808252600090608083820181850186855b600381101561176257601f19888403018452815160a081518186526116fe8287018261167e565b9150508782015185820389870152611716828261167e565b91505060408083015186830382880152611730838261167e565b6060858101516001600160a01b03169089015293890151968901969096525050938601939250908501906001016116d7565b5090979650505050505050565b60006020828403121561178157600080fd5b813567ffffffffffffffff81111561179857600080fd5b8201606081850312156117aa57600080fd5b9392505050565b6000606082840312156117c357600080fd5b826060830111156117d357600080fd5b50919050565b60008151808452602080850194506020840160005b838110156118135781516001600160a01b0316875295820195908201906001016117ee565b509495945050505050565b6020815260006117aa60208301846117d9565b634e487b7160e01b600052602160045260246000fd5b6002811061186557634e487b7160e01b600052602160045260246000fd5b9052565b602081016118778284611847565b92915050565b60006020828403121561188f57600080fd5b5035919050565b60a0815260006118a960a083018861167e565b82810360208401526118bb818861167e565b905082810360408401526118cf818761167e565b6001600160a01b039590951660608401525050608001529392505050565b600181811c9082168061190157607f821691505b6020821081036117d357634e487b7160e01b600052602260045260246000fd5b6040810161192f8285611847565b6117aa6020830184611847565b6000808335601e1984360301811261195357600080fd5b83018035915067ffffffffffffffff82111561196e57600080fd5b60200191503681900382131561198357600080fd5b9250929050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b601f821115610cb1576000816000526020600020601f850160051c810160208610156119df5750805b601f850160051c820191505b818110156119fe578281556001016119eb565b505050505050565b815167ffffffffffffffff811115611a2057611a206119a0565b611a3481611a2e84546118ed565b846119b6565b602080601f831160018114611a695760008415611a515750858301515b600019600386901b1c1916600185901b1785556119fe565b600085815260208120601f198616915b82811015611a9857888601518255948401946001909101908401611a79565b5085821015611ab65787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b878152608060208201526000611b0960808301888a611ac6565b8281036040840152611b1c818789611ac6565b90508281036060840152611b31818587611ac6565b9a9950505050505050505050565b634e487b7160e01b600052601160045260246000fd5b600060ff821660ff8103611b6b57611b6b611b3f565b60010192915050565b8082018082111561187757611877611b3f565b803560ff81168114611b9857600080fd5b919050565b60608101818360005b6003811015611bd05760ff611bba83611b87565b1683526020928301929190910190600101611ba6565b50505092915050565b600060208284031215611beb57600080fd5b6117aa82611b87565b60ff828116828216039081111561187757611877611b3f565b61ffff818116838216019080821115611c2857611c28611b3f565b5092915050565b60ff818116838216019081111561187757611877611b3f565b600082611c6557634e487b7160e01b600052601260045260246000fd5b500490565b808202811582820484141761187757611877611b3f565b8181038181111561187757611877611b3f565b604081526000611ca760408301856117d9565b9050826020830152939250505056fea2646970667358221220fa4d9673a4c117b5052802d4ca7ff339c6bb4f57288d7f8ea142cbf70659c54d64736f6c63430008190033",
  "deployedBytecode": "0x6080604052600436106100c65760003560e01c80638b5b9ccc1161007f578063e2c03ace11610059578063e2c03ace14610237578063f5e9601114610251578063f6d361cc14610266578063f71d96cb14610280576100e4565b80638b5b9ccc146101bd578063b1c9fe6e146101df578063bfb231d214610206576100e4565b80633bc330d2146100fd578063428cebe2146101285780634411b3eb1461014a578063719ce73e14610171578063839e48de14610195578063884bf67c146101a8576100e4565b366100e457604051631021348160e01b815260040160405180910390fd5b604051631021348160e01b815260040160405180910390fd5b34801561010957600080fd5b506101126102b8565b60405161011f91906116c4565b60405180910390f35b34801561013457600080fd5b5061014861014336600461176f565b6104dd565b005b34801561015657600080fd5b5061015f600881565b60405160ff909116815260200161011f565b34801561017d57600080fd5b5061018760135481565b60405190815260200161011f565b6101486101a33660046117b1565b6107a6565b3480156101b457600080fd5b50601354610187565b3480156101c957600080fd5b506101d2610918565b60405161011f919061181e565b3480156101eb57600080fd5b506000546101f99060ff1681565b60405161011f9190611869565b34801561021257600080fd5b5061022661022136600461187d565b61097a565b60405161011f959493929190611896565b34801561024357600080fd5b5060105461015f9060ff1681565b34801561025d57600080fd5b5061015f600381565b34801561027257600080fd5b506101876509184e72a00081565b34801561028c57600080fd5b506102a061029b36600461187d565b610b53565b6040516001600160a01b03909116815260200161011f565b6102c0611534565b6040805160608101909152600160036000835b828210156104d4578382600502016040518060a00160405290816000820180546102fc906118ed565b80601f0160208091040260200160405190810160405280929190818152602001828054610328906118ed565b80156103755780601f1061034a57610100808354040283529160200191610375565b820191906000526020600020905b81548152906001019060200180831161035857829003601f168201915b5050505050815260200160018201805461038e906118ed565b80601f01602080910402602001604051908101604052809291908181526020018280546103ba906118ed565b80156104075780601f106103dc57610100808354040283529160200191610407565b820191906000526020600020905b8154815290600101906020018083116103ea57829003601f168201915b50505050508152602001600282018054610420906118ed565b80601f016020809104026020016040519081016040528092919081815260200182805461044c906118ed565b80156104995780601f1061046e57610100808354040283529160200191610499565b820191906000526020600020905b81548152906001019060200180831161047c57829003601f168201915b505050918352505060038201546001600160a01b031660208083019190915260049092015460409091015290825260019290920191016102d3565b50505050905090565b60008060005460ff1660018111156104f7576104f7611831565b14610529576000546040516305fb5e1b60e01b815261052091839160ff90911690600401611921565b60405180910390fd5b601054600360ff90911610610551576040516358fbefcb60e11b815260040160405180910390fd5b61055a82610b7d565b610577576040516327b3518960e11b815260040160405180910390fd5b6040805160a081019091528061058d848061193c565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050908252506020908101906105d69085018561193c565b8080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525050509082525060200161061d604085018561193c565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050908252503360208201524260409091015260105460019060ff166003811061067a5761067a61198a565b6005020160008201518160000190816106939190611a06565b50602082015160018201906106a89082611a06565b50604082015160028201906106bd9082611a06565b5060608201516003820180546001600160a01b0319166001600160a01b03909216919091179055608090910151600490910155601054339060ff167ff3e72e6ae6e80c6ba9ec05a6258f20828c52f8122333e93bf8ba4cc1a55da61e42610724868061193c565b610731602089018961193c565b61073e60408b018b61193c565b6040516107519796959493929190611aef565b60405180910390a36010805460ff1690600061076c83611b55565b82546101009290920a60ff818102199093169183160217909155601054166002190190506107a2576000805460ff191660011790555b5050565b60018060005460ff1660018111156107c0576107c0611831565b146107e9576000546040516305fb5e1b60e01b815261052091839160ff90911690600401611921565b60145460ff161561080d5760405163558a1e0360e11b815260040160405180910390fd5b6014805460ff19166001179055346509184e72a0001461084257604051630517287f60e41b8152346004820152602401610520565b61084b82610bde565b60118054600181019091557f31ecc21a745e3968a04e9570e4425bc18fa8019c68028196b546d1669c200c680180546001600160a01b0319163390811790915560009081526012602052604090206108a590836003611594565b5034601360008282546108b89190611b74565b909155505060405133907ff2af8c8b3986f97978f8f6dc47b3290511328d1293569de75e6e3f88702d0ad9906108ef908590611b9d565b60405180910390a26011546007190161090a5761090a610cb6565b50506014805460ff19169055565b6060601180548060200260200160405190810160405280929190818152602001828054801561097057602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311610952575b5050505050905090565b6001816003811061098a57600080fd5b600502018054909150819061099e906118ed565b80601f01602080910402602001604051908101604052809291908181526020018280546109ca906118ed565b8015610a175780601f106109ec57610100808354040283529160200191610a17565b820191906000526020600020905b8154815290600101906020018083116109fa57829003601f168201915b505050505090806001018054610a2c906118ed565b80601f0160208091040260200160405190810160405280929190818152602001828054610a58906118ed565b8015610aa55780601f10610a7a57610100808354040283529160200191610aa5565b820191906000526020600020905b815481529060010190602001808311610a8857829003601f168201915b505050505090806002018054610aba906118ed565b80601f0160208091040260200160405190810160405280929190818152602001828054610ae6906118ed565b8015610b335780601f10610b0857610100808354040283529160200191610b33565b820191906000526020600020905b815481529060010190602001808311610b1657829003601f168201915b50505050600383015460049093015491926001600160a01b031691905085565b60118181548110610b6357600080fd5b6000918252602090912001546001600160a01b0316905081565b6000610b89828061193c565b9050600003610b9a57506000919050565b610ba7602083018361193c565b9050600003610bb857506000919050565b610bc5604083018361193c565b9050600003610bd657506000919050565b506001919050565b610be661162a565b60005b600360ff82161015610cb1576000838260ff1660038110610c0c57610c0c61198a565b602002016020810190610c1f9190611bd9565b9050600360ff821610610c4a5760405163515a45e760e11b815260ff82166004820152602401610520565b828160ff1660038110610c5f57610c5f61198a565b602002015115610c8757604051631fd2e8a560e31b815260ff82166004820152602401610520565b6001838260ff1660038110610c9e57610c9e61198a565b9115156020909202015250600101610be9565b505050565b610cbe61162a565b60005b600860ff82161015610dce5760006012600060118460ff1681548110610ce957610ce961198a565b6000918252602080832091909101546001600160a01b0316835282019290925260409081018220815160608101928390529290916003918390855b825461010083900a900460ff16815260206001928301818104948501949093039092029101808411610d245790505050505050905060005b600360ff82161015610dc457610d73816003611bf4565b60ff1684838360ff1660038110610d8c57610d8c61198a565b602002015160ff1660038110610da457610da461198a565b60200201818151610db59190611c0d565b61ffff16905250600101610d5c565b5050600101610cc1565b50610dd761162a565b60005b600360ff82161015610e115780828260ff1660038110610dfc57610dfc61198a565b60ff9092166020929092020152600101610dda565b5060005b600360ff82161015610f3e57806000610e2f826001611c2f565b90505b600360ff82161015610ebe5784848360ff1660038110610e5457610e5461198a565b602002015160ff1660038110610e6c57610e6c61198a565b602002015161ffff1685858360ff1660038110610e8b57610e8b61198a565b602002015160ff1660038110610ea357610ea361198a565b602002015161ffff161115610eb6578091505b600101610e32565b50828160ff1660038110610ed457610ed461198a565b6020020151838360ff1660038110610eee57610eee61198a565b6020020151848460ff1660038110610f0857610f0861198a565b60200201858460ff1660038110610f2157610f2161198a565b60ff93841660209190910291909101529116905250600101610e15565b50604080516008808252610120820190925260009182919060208201610100803683370190505090506000805b600860ff821610156111635760006012600060118460ff1681548110610f9357610f9361198a565b6000918252602080832091909101546001600160a01b0316835282019290925260409081018220815160608101928390529290916003918390855b825461010083900a900460ff16815260206001928301818104948501949093039092029101808411610fce579050505050505090506000805b600360ff8216101561106857878160ff16600381106110285761102861198a565b602002015160ff16838260ff16600381106110455761104561198a565b602002015160ff1603611060578161105c81611b55565b9250505b600101611007565b508560ff168160ff1611156110e0578095506001935060118360ff16815481106110945761109461198a565b600091825260208220015486516001600160a01b039091169187916110bb576110bb61198a565b60200260200101906001600160a01b031690816001600160a01b031681525050611159565b8560ff168160ff16036111595760118360ff16815481106111035761110361198a565b6000918252602090912001546001600160a01b0316858561112381611b55565b965060ff16815181106111385761113861198a565b60200260200101906001600160a01b031690816001600160a01b0316815250505b5050600101610f6b565b5060008160ff1667ffffffffffffffff811115611182576111826119a0565b6040519080825280602002602001820160405280156111ab578160200160208202803683370190505b50905060005b8260ff168160ff16101561121157838160ff16815181106111d4576111d461198a565b6020026020010151828260ff16815181106111f1576111f161198a565b6001600160a01b03909216602092830291909101909101526001016111b1565b50601354600061122460ff851683611c48565b9050600061123560ff861683611c6a565b905060006112438285611c81565b600060138190559091505b8660ff168160ff16101561134a57600060ff82161561126e576000611270565b825b61127a9086611b74565b90506000878360ff16815181106112935761129361198a565b60200260200101516001600160a01b03168260405160006040518083038185875af1925050503d80600081146112e5576040519150601f19603f3d011682016040523d82523d6000602084013e6112ea565b606091505b505090508061134057878360ff16815181106113085761130861198a565b60200260200101518260405163e3e9273560e01b81526004016105209291906001600160a01b03929092168252602082015260400190565b505060010161124e565b507fc4529ca7a8ea53caec7963aa9e414cc63526c15c578b114b9315e80fd7eec666858460405161137c929190611c94565b60405180910390a161138c611398565b50505050505050505050565b60005b600360ff82161015611483576040805160c081018252600060a082018181528252825160208181018552828252808401919091528351908101845281815292820192909252606081018290526080810191909152600160ff8316600381106114055761140561198a565b60050201600082015181600001908161141e9190611a06565b50602082015160018201906114339082611a06565b50604082015160028201906114489082611a06565b5060608201516003820180546001600160a01b0319166001600160a01b0390921691909117905560809091015160049091015560010161139b565b506010805460ff1916905560005b60115460ff821610156114ef576012600060118360ff16815481106114b8576114b861198a565b60009182526020808320909101546001600160a01b03168352820192909252604001812055806114e781611b55565b915050611491565b506114fc60116000611648565b60006013819055805460ff191681556040517f03d7415a8b5c901ab0451507bd934f2971b04632563374d49a1cfef4c8666e5a9190a1565b60405180606001604052806003905b61157e6040518060a0016040528060608152602001606081526020016060815260200160006001600160a01b03168152602001600081525090565b8152602001906001900390816115435790505090565b60018301918390821561161a5791602002820160005b838211156115eb57833560ff1683826101000a81548160ff021916908360ff16021790555092602001926001016020816000010492830192600103026115aa565b80156116185782816101000a81549060ff02191690556001016020816000010492830192600103026115eb565b505b50611626929150611669565b5090565b60405180606001604052806003906020820280368337509192915050565b50805460008255906000526020600020908101906116669190611669565b50565b5b80821115611626576000815560010161166a565b6000815180845260005b818110156116a457602081850181015186830182015201611688565b506000602082860101526020601f19601f83011685010191505092915050565b6020808252600090608083820181850186855b600381101561176257601f19888403018452815160a081518186526116fe8287018261167e565b9150508782015185820389870152611716828261167e565b91505060408083015186830382880152611730838261167e565b6060858101516001600160a01b03169089015293890151968901969096525050938601939250908501906001016116d7565b5090979650505050505050565b60006020828403121561178157600080fd5b813567ffffffffffffffff81111561179857600080fd5b8201606081850312156117aa57600080fd5b9392505050565b6000606082840312156117c357600080fd5b826060830111156117d357600080fd5b50919050565b60008151808452602080850194506020840160005b838110156118135781516001600160a01b0316875295820195908201906001016117ee565b509495945050505050565b6020815260006117aa60208301846117d9565b634e487b7160e01b600052602160045260246000fd5b6002811061186557634e487b7160e01b600052602160045260246000fd5b9052565b602081016118778284611847565b92915050565b60006020828403121561188f57600080fd5b5035919050565b60a0815260006118a960a083018861167e565b82810360208401526118bb818861167e565b905082810360408401526118cf818761167e565b6001600160a01b039590951660608401525050608001529392505050565b600181811c9082168061190157607f821691505b6020821081036117d357634e487b7160e01b600052602260045260246000fd5b6040810161192f8285611847565b6117aa6020830184611847565b6000808335601e1984360301811261195357600080fd5b83018035915067ffffffffffffffff82111561196e57600080fd5b60200191503681900382131561198357600080fd5b9250929050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052604160045260246000fd5b601f821115610cb1576000816000526020600020601f850160051c810160208610156119df5750805b601f850160051c820191505b818110156119fe578281556001016119eb565b505050505050565b815167ffffffffffffffff811115611a2057611a206119a0565b611a3481611a2e84546118ed565b846119b6565b602080601f831160018114611a695760008415611a515750858301515b600019600386901b1c1916600185901b1785556119fe565b600085815260208120601f198616915b82811015611a9857888601518255948401946001909101908401611a79565b5085821015611ab65787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b878152608060208201526000611b0960808301888a611ac6565b8281036040840152611b1c818789611ac6565b90508281036060840152611b31818587611ac6565b9a9950505050505050505050565b634e487b7160e01b600052601160045260246000fd5b600060ff821660ff8103611b6b57611b6b611b3f565b60010192915050565b8082018082111561187757611877611b3f565b803560ff81168114611b9857600080fd5b919050565b60608101818360005b6003811015611bd05760ff611bba83611b87565b1683526020928301929190910190600101611ba6565b50505092915050565b600060208284031215611beb57600080fd5b6117aa82611b87565b60ff828116828216039081111561187757611877611b3f565b61ffff818116838216019080821115611c2857611c28611b3f565b5092915050565b60ff818116838216019081111561187757611877611b3f565b600082611c6557634e487b7160e01b600052601260045260246000fd5b500490565b808202811582820484141761187757611877611b3f565b8181038181111561187757611877611b3f565b604081526000611ca760408301856117d9565b9050826020830152939250505056fea2646970667358221220fa4d9673a4c117b5052802d4ca7ff339c6bb4f57288d7f8ea142cbf70659c54d64736f6c63430008190033",
  "devdoc": {
    "details": "Functionality preserved; refactored with custom errors, modifiers, NatSpec and reentrancy guard.",
    "kind": "dev",
    "methods": {
      "addItem((string,string,string))": {
        "details": "Reverts when not in CollectingItems phase, when items are full, or input is invalid.",
        "params": {
          "item": "Author, title and url of the item to add."
        }
      },
      "getCurrentItems()": {
        "returns": {
          "_0": "The fixed-size array of items of length NUM_ITEMS."
        }
      },
      "getPlayers()": {
        "returns": {
          "_0": "The dynamic list of player addresses."
        }
      },
      "getPrizePool()": {
        "returns": {
          "_0": "The prize pool balance."
        }
      },
      "rankItems(uint8[3])": {
        "details": "Reverts when not in CollectingRanks phase, wrong ETH value, or sender already ranked.",
        "params": {
          "order": "A permutation of [0..NUM_ITEMS-1] from best to worst."
        }
      }
    },
    "title": "Rank5 Autonomous Game",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "addItem((string,string,string))": {
        "notice": "Add an item with author, title and url until NUM_ITEMS exist, then switch to ranking phase."
      },
      "getCurrentItems()": {
        "notice": "Returns the items proposed for the current round."
      },
      "getPlayers()": {
        "notice": "Returns the addresses of players who have ranked in the current round so far."
      },
      "getPrizePool()": {
        "notice": "Returns the current prize pool (in wei) accumulated for the round."
      },
      "rankItems(uint8[3])": {
        "notice": "Submit ranking (bestworst) for the current round by paying exactly ENTRY_FEE wei."
      }
    },
    "notice": "Repeated rounds game with {NUM_ITEMS} items and up to {MAX_PLAYERS} players per round.         Each ranking submission requires exactly {ENTRY_FEE} wei. On reaching {MAX_PLAYERS} players:           1) Compute cumulative ranking via Borda count           2) Identify player(s) whose order matches the final order most closely           3) Split and pay the prize pool among winners (first gets remainder)           4) Reset state for the next round",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 19,
        "contract": "contracts/Rankr.sol:Rankr",
        "label": "phase",
        "offset": 0,
        "slot": "0",
        "type": "t_enum(Phase)14"
      },
      {
        "astId": 78,
        "contract": "contracts/Rankr.sol:Rankr",
        "label": "items",
        "offset": 0,
        "slot": "1",
        "type": "t_array(t_struct(Item)66_storage)3_storage"
      },
      {
        "astId": 80,
        "contract": "contracts/Rankr.sol:Rankr",
        "label": "itemsCount",
        "offset": 0,
        "slot": "16",
        "type": "t_uint8"
      },
      {
        "astId": 83,
        "contract": "contracts/Rankr.sol:Rankr",
        "label": "players",
        "offset": 0,
        "slot": "17",
        "type": "t_array(t_address)dyn_storage"
      },
      {
        "astId": 89,
        "contract": "contracts/Rankr.sol:Rankr",
        "label": "rankings",
        "offset": 0,
        "slot": "18",
        "type": "t_mapping(t_address,t_array(t_uint8)3_storage)"
      },
      {
        "astId": 91,
        "contract": "contracts/Rankr.sol:Rankr",
        "label": "prizePool",
        "offset": 0,
        "slot": "19",
        "type": "t_uint256"
      },
      {
        "astId": 93,
        "contract": "contracts/Rankr.sol:Rankr",
        "label": "_entered",
        "offset": 0,
        "slot": "20",
        "type": "t_bool"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_address)dyn_storage": {
        "base": "t_address",
        "encoding": "dynamic_array",
        "label": "address[]",
        "numberOfBytes": "32"
      },
      "t_array(t_struct(Item)66_storage)3_storage": {
        "base": "t_struct(Item)66_storage",
        "encoding": "inplace",
        "label": "struct Rankr.Item[3]",
        "numberOfBytes": "480"
      },
      "t_array(t_uint8)3_storage": {
        "base": "t_uint8",
        "encoding": "inplace",
        "label": "uint8[3]",
        "numberOfBytes": "32"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_enum(Phase)14": {
        "encoding": "inplace",
        "label": "enum Rankr.Phase",
        "numberOfBytes": "1"
      },
      "t_mapping(t_address,t_array(t_uint8)3_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint8[3])",
        "numberOfBytes": "32",
        "value": "t_array(t_uint8)3_storage"
      },
      "t_string_storage": {
        "encoding": "bytes",
        "label": "string",
        "numberOfBytes": "32"
      },
      "t_struct(Item)66_storage": {
        "encoding": "inplace",
        "label": "struct Rankr.Item",
        "members": [
          {
            "astId": 57,
            "contract": "contracts/Rankr.sol:Rankr",
            "label": "author",
            "offset": 0,
            "slot": "0",
            "type": "t_string_storage"
          },
          {
            "astId": 59,
            "contract": "contracts/Rankr.sol:Rankr",
            "label": "title",
            "offset": 0,
            "slot": "1",
            "type": "t_string_storage"
          },
          {
            "astId": 61,
            "contract": "contracts/Rankr.sol:Rankr",
            "label": "url",
            "offset": 0,
            "slot": "2",
            "type": "t_string_storage"
          },
          {
            "astId": 63,
            "contract": "contracts/Rankr.sol:Rankr",
            "label": "adder",
            "offset": 0,
            "slot": "3",
            "type": "t_address"
          },
          {
            "astId": 65,
            "contract": "contracts/Rankr.sol:Rankr",
            "label": "addedAt",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "160"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      },
      "t_uint8": {
        "encoding": "inplace",
        "label": "uint8",
        "numberOfBytes": "1"
      }
    }
  }
}